{"ast":null,"code":"import React,{useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{useEffect(()=>{const handleCredentialResponse=response=>{console.log('Encoded JWT ID token: '+response.credential);// Send the token to your backend for verification\nfetch('/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:response.credential})}).then(res=>{if(!res.ok){throw new Error('Login failed');}return res.json();}).then(data=>{console.log('Login successful:',data);// Handle successful login here (e.g., redirect to dashboard, store user info)\n}).catch(error=>{console.error('Error during login:',error);// Handle login error here (e.g., show error message)\n});// Check if the Google One Tap script is already loaded\nif(window.google&&window.google.accounts&&window.google.accounts.id){console.log('Google One Tap already initialized');window.google.accounts.id.initialize({client_id:'506064022717-4f6o2i9v8560g5g3ns45h1al3sr2p8j0.apps.googleusercontent.com',callback:handleCredentialResponse,auto_select:true// Automatically select the account if possible\n});window.google.accounts.id.prompt();return;};};const loadGoogleScript=()=>{const script=document.createElement('script');script.src='https://accounts.google.com/gsi/client';script.async=true;script.defer=true;script.onload=()=>{console.log('Google One Tap script loaded');window.google.accounts.id.initialize({client_id:'506064022717-4f6o2i9v8560g5g3ns45h1al3sr2p8j0.apps.googleusercontent.com',callback:handleCredentialResponse,auto_select:true// Automatically select the account if possible\n});window.google.accounts.id.prompt(notification=>{if(notification.isNotDisplayed){console.error('Google One Tap not displayed:',notification.reason);}if(notification.isSkippedMoment){console.warn('Google One Tap skipped:',notification.reason);}});};script.onerror=()=>{console.error('Failed to load Google One Tap script');};document.body.appendChild(script);};if(!document.getElementById('google-one-tap-script')){loadGoogleScript();}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Google One Tap will appear automatically if you're eligible.\"})]});};export default Login;","map":{"version":3,"names":["React","useEffect","jsx","_jsx","jsxs","_jsxs","Login","handleCredentialResponse","response","console","log","credential","fetch","method","headers","body","JSON","stringify","token","then","res","ok","Error","json","data","catch","error","window","google","accounts","id","initialize","client_id","callback","auto_select","prompt","loadGoogleScript","script","document","createElement","src","async","defer","onload","notification","isNotDisplayed","reason","isSkippedMoment","warn","onerror","appendChild","getElementById","children"],"sources":["/Users/ayoung/work/src/github.com/dcwb/frontend/src/components/Login.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\ndeclare global {\n    interface Window {\n        google: any;\n    }\n}\n\nconst Login: React.FC = () => {\n    useEffect(() => {\n        const handleCredentialResponse = (response: any) => {\n            console.log('Encoded JWT ID token: ' + response.credential);\n            // Send the token to your backend for verification\n            fetch('/auth/login', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({ token: response.credential }),\n            })\n                .then((res) => {\n                    if (!res.ok) {\n                        throw new Error('Login failed');\n                    }\n                    return res.json();\n                })\n                .then((data) => {\n                    console.log('Login successful:', data);\n                    // Handle successful login here (e.g., redirect to dashboard, store user info)\n                })\n                .catch((error) => {\n                    console.error('Error during login:', error);\n                    // Handle login error here (e.g., show error message)\n                });\n        // Check if the Google One Tap script is already loaded\n        if (window.google && window.google.accounts && window.google.accounts.id) {\n            console.log('Google One Tap already initialized');\n            window.google.accounts.id.initialize({\n                client_id: '506064022717-4f6o2i9v8560g5g3ns45h1al3sr2p8j0.apps.googleusercontent.com',\n                callback: handleCredentialResponse,\n                auto_select: true, // Automatically select the account if possible\n            });\n            window.google.accounts.id.prompt();\n            return;\n        };}\n\n        const loadGoogleScript = () => {\n            const script = document.createElement('script');\n            script.src = 'https://accounts.google.com/gsi/client';\n            script.async = true;\n            script.defer = true;\n            script.onload = () => {\n                console.log('Google One Tap script loaded');\n                window.google.accounts.id.initialize({\n                    client_id: '506064022717-4f6o2i9v8560g5g3ns45h1al3sr2p8j0.apps.googleusercontent.com',\n                    callback: handleCredentialResponse,\n                    auto_select: true, // Automatically select the account if possible\n                });\n                window.google.accounts.id.prompt((notification: any) => {\n                    if (notification.isNotDisplayed) {\n                        console.error('Google One Tap not displayed:', notification.reason);\n                    }\n                    if (notification.isSkippedMoment) {\n                        console.warn('Google One Tap skipped:', notification.reason);\n                    }\n                });\n            };\n            script.onerror = () => {\n                console.error('Failed to load Google One Tap script');\n            };\n            document.body.appendChild(script);\n        };\n\n        if (!document.getElementById('google-one-tap-script')) {\n            loadGoogleScript();\n        }\n    }, []);\n\n    return (\n        <div>\n            <h2>Login</h2>\n            <p>Google One Tap will appear automatically if you're eligible.</p>\n        </div>\n    );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}